datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

generator client {
  provider = "prisma-client-js"
}

model Huesped {
  id               Int      @id @default(autoincrement())
  nombre           String
  tipoDocumento    String
  numeroDocumento  String
  nacionalidad     String
  direccion        String
  lugarProcedencia String
  lugarDestino     String
  telefono         String
  email            String
  motivoViaje      String
  fechaIngreso     String
  fechaSalida      String
  numeroReserva    String   @unique
  creadoEn         DateTime @default(now())

  checkinUrl       String?
  codigoTTLock     String?

  // ðŸ”¥ CAMPOS PARA ARCHIVOS
  archivoPasaporte String?
  archivoCedula    String?
  archivoFirma     String?
  passcodes        Passcode[]
}

model Passcode {
  id              Int      @id @default(autoincrement())

  // RelaciÃ³n con huÃ©sped
  huespedId       Int
  huesped         Huesped  @relation(fields: [huespedId], references: [id], onDelete: Cascade)

  // TTLock
  lockId          Int
  codigo          String
  keyboardPwdId   Int?
  tipo            String   // "ADD" | "GET"

  // Vigencia
  startDate       Int
  endDate         Int

  // Estado interno
  estado          String   @default("ACTIVO")

  creadoEn        DateTime @default(now())

  @@index([huespedId])
  @@index([lockId])
}
